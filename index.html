<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlayWatch â€“ Mega Gry i Zagadki</title>
<style>
body { font-family: Arial, sans-serif; background: linear-gradient(to right, #1e3c72, #2a5298); color: #fff; margin:0; padding:0;}
header, footer { text-align:center; padding:20px; background:#0d1b33;}
section { margin:20px auto; padding:15px; max-width:800px; background: rgba(0,0,0,0.6); border-radius:10px;}
button { padding:10px 15px; margin:5px; cursor:pointer; border:none; border-radius:5px; background:#ff9800; color:#000; font-weight:bold;}
input { padding:8px; border-radius:5px; border:none; width:150px;}
#loginScreen { display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh;}
#gameScreen { display:none;}
ol { padding-left:20px;}
</style>
</head>
<body>

<div id="loginScreen">
<h1>ğŸ® Witaj w PlayWatch!</h1>
<p>Podaj swÃ³j nick, aby rozpoczÄ…Ä‡:</p>
<input type="text" id="playerNick" placeholder="TwÃ³j nick">
<button onclick="startGame()">Zaczynam!</button>
</div>

<div id="gameScreen">
<header>
<h1>ğŸ® PlayWatch</h1>
<p>Nick: <span id="displayNick"></span></p>
<p>Punkty: <span id="totalPoints">0</span></p>
<p>Rebirthy: <span id="rebirthCount">0</span></p>
</header>

<section>
<h2>ğŸ§© Zagadki</h2>
<p id="riddleText">Kliknij "Nowa zagadka"</p>
<input type="text" id="riddleAnswer" placeholder="Twoja odpowiedÅº">
<button onclick="sprawdzZagadke()">SprawdÅº</button>
<button onclick="losujZagadke()">Nowa zagadka</button>
<p id="riddleResult"></p>
</section>

<section>
<h2>ğŸ–±ï¸ Klikacz</h2>
<p>KlikniÄ™cia: <span id="clicks">0</span></p>
<button onclick="klik()">Kliknij mnie</button>
</section>

<section>
<h2>ğŸ² Losowa liczba</h2>
<p>Liczba: <span id="number">?</span></p>
<button onclick="losuj()">Losuj 1â€“100</button>
</section>

<section>
<h2>âš¡ Szybkie klikniÄ™cia</h2>
<p>Kliknij 5 razy jak najszybciej!</p>
<button id="fastClickBtn">Kliknij mnie</button>
<p>Twoje klikniÄ™cia: <span id="fastClicks">0</span></p>
</section>

<section>
<h2>ğŸ´ Losowa karta</h2>
<p>Karta: <span id="card">?</span></p>
<button onclick="losujKarte()">Losuj kartÄ™</button>
</section>

<section>
<h2>ğŸ¯ Odgadnij liczbÄ™</h2>
<p>Wpisz liczbÄ™ 1â€“10:</p>
<input type="number" id="guessNumber" min="1" max="10">
<button onclick="sprawdzLiczbe()">SprawdÅº</button>
<p id="guessResult"></p>
</section>

<section>
<h2>ğŸ”„ Rebirth</h2>
<button onclick="rebirth()">Rebirth</button>
</section>

<section>
<h2>ğŸ† Ranking TOP 100</h2>
<ol id="ranking"></ol>
</section>

<section>
<h2>ğŸ’° Bonus za reklamÄ™</h2>
<button onclick="bonusAdWatched()">OglÄ…daÅ‚em reklamÄ™</button>
</section>

<footer>
<a href="regulamin.html">Regulamin</a> |
<a href="polityka-prywatnosci.html">Polityka prywatnoÅ›ci</a> |
<a href="mailto:sikoraszymon45@gmail.com">Kontakt</a>
</footer>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA5cPX0gRrjInMdk7B_tf2Z8Fb3zb_RgWk",
  authDomain: "playwatchranking-6d8eb.firebaseapp.com",
  projectId: "playwatchranking-6d8eb",
  storageBucket: "playwatchranking-6d8eb.appspot.com",
  messagingSenderId: "563511993358",
  appId: "1:563511993358:web:32d40f55f7ce75b25bc85f"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.db = db; // dostÄ™p globalny
</script>

<script>
// ====== Zmienne gry ======
window.totalPoints = parseInt(localStorage.getItem('totalPoints'))||0;
window.clicks = parseInt(localStorage.getItem('clicks'))||0;
window.fastClicks = parseInt(localStorage.getItem('fastClicks'))||0;
window.rebirthCount = parseInt(localStorage.getItem('rebirthCount'))||0;
window.rebirthMultiplier = 1 + window.rebirthCount;
window.currentNick = localStorage.getItem('currentNick')||"";
window.rankingData = JSON.parse(localStorage.getItem('rankingData'))||[];

// ====== Gry ======
window.zagadki = [
  {q:"Co zawsze roÅ›nie, ale nigdy nie spada?", a:"wiek"},
  {q:"Co ma klucze, ale nie otwiera drzwi?", a:"fortepian"},
  {q:"Co moÅ¼na zÅ‚amaÄ‡, ale nie moÅ¼na dotknÄ…Ä‡?", a:"obietnica"},
  {q:"Co ma wiele twarzy, ale nie ma oczu?", a:"moneta"},
  {q:"Co jest Twoje, a inni uÅ¼ywajÄ… czÄ™Å›ciej niÅ¼ Ty?", a:"imiÄ™"}
];

// ====== Funkcje globalne ======
window.startGame = function(){
  let nick=document.getElementById('playerNick').value.trim();
  if(!nick){alert("Podaj nick!"); return;}
  window.currentNick=nick;
  localStorage.setItem('currentNick',nick);
  document.getElementById('displayNick').innerText=nick;
  document.getElementById('loginScreen').style.display='none';
  document.getElementById('gameScreen').style.display='block';
  updateAllDisplays();
  losujZagadke();
};

window.updateAllDisplays = function(){
  document.getElementById('totalPoints').innerText=totalPoints;
  document.getElementById('clicks').innerText=clicks;
  document.getElementById('fastClicks').innerText=fastClicks;
  document.getElementById('rebirthCount').innerText=rebirthCount;
  updateRanking();
};

window.losujZagadke = function(){
  let los=Math.floor(Math.random()*zagadki.length);
  document.getElementById('riddleText').innerText=zagadki[los].q;
  document.getElementById('riddleAnswer').value="";
  document.getElementById('riddleResult').innerText="";
  document.getElementById('riddleText').setAttribute('data-answer',zagadki[los].a);
};

window.sprawdzZagadke=function(){
  let answer=document.getElementById('riddleAnswer').value.toLowerCase().trim();
  let correct=document.getElementById('riddleText').getAttribute('data-answer');
  if(answer===correct){ addPoints(10); document.getElementById('riddleResult').innerText="âœ… Poprawnie!"; }
  else { document.getElementById('riddleResult').innerText="âŒ BÅ‚Ä™dnie!"; }
};

window.klik=function(){ clicks++; addPoints(1); document.getElementById('clicks').innerText=clicks; localStorage.setItem('clicks',clicks); };
window.losuj=function(){ let num=Math.floor(Math.random()*100)+1; document.getElementById('number').innerText=num; addPoints(num); };
window.losujKarte=function(){ const karty=["â™ A","â™ 2","â™ 3","â™ 4","â™ 5","â™ 6","â™ 7","â™ 8","â™ 9","â™ 10","â™ J","â™ Q","â™ K","â™¥A","â™¥2","â™¥3","â™¥4","â™¥5","â™¥6","â™¥7","â™¥8","â™¥9","â™¥10","â™¥J","â™¥Q","â™¥K","â™¦A","â™¦2","â™¦3","â™¦4","â™¦5","â™¦6","â™¦7","â™¦8","â™¦9","â™¦10","â™¦J","â™¦Q","â™¦K","â™£A","â™£2","â™£3","â™£4","â™£5","â™£6","â™£7","â™£8","â™£9","â™£10","â™£J","â™£Q","â™£K"]; document.getElementById('card').innerText=karty[Math.floor(Math.random()*karty.length)]; addPoints(10);};
window.sprawdzLiczbe=function(){ let guess=parseInt(document.getElementById('guessNumber').value); let correct=Math.floor(Math.random()*10)+1; if(guess===correct){ addPoints(20); document.getElementById('guessResult').innerText="âœ… TrafiÅ‚eÅ›!"; } else { document.getElementById('guessResult').innerText=`âŒ PomyÅ‚ka! PrawidÅ‚owa: ${correct}`; }};

window.addPoints=function(p){ totalPoints += p*rebirthMultiplier; document.getElementById('totalPoints').innerText=totalPoints; localStorage.setItem('totalPoints',totalPoints); updateRanking();};

window.rebirth=function(){ 
  const rebirthCosts=[1000,1000000,10000000,100000000,1000000000];
  let cost=rebirthCosts[rebirthCount]||1000000000;
  if(totalPoints>=cost){ totalPoints=0; rebirthCount++; rebirthMultiplier=1+rebirthCount;
    document.getElementById('rebirthCount').innerText=rebirthCount;
    document.getElementById('totalPoints').innerText=totalPoints;
    localStorage.setItem('totalPoints',totalPoints);
    localStorage.setItem('rebirthCount',rebirthCount);
    alert(`Rebirth! MnoÅ¼nik Ã—${rebirthMultiplier} aktywny!`);
  } else { alert(`Nie masz wystarczajÄ…co punktÃ³w! Potrzebujesz ${cost}`); }
};

window.updateRanking=function(){
  let exists = rankingData.findIndex(x=>x.nick===currentNick);
  if(exists>=0){ rankingData[exists].points=totalPoints; } else { rankingData.push({nick:currentNick, points:totalPoints}); }
  rankingData.sort((a,b)=>b.points-a.points);
  document.getElementById('ranking').innerHTML=rankingData.slice(0,100).map(p=>`<li>${p.nick} - ${p.points} pkt</li>`).join('');
  localStorage.setItem('rankingData',JSON.stringify(rankingData));
};

window.bonusAdWatched=function(){ addPoints(50); alert("Bonus +50 pkt!");};

// Auto-logowanie
if(currentNick!==""){ 
  document.getElementById('loginScreen').style.display='none';
  document.getElementById('gameScreen').style.display='block';
  document.getElementById('displayNick').innerText=currentNick;
  updateAllDisplays();
  losujZagadke();
}

// Szybkie klikniÄ™cia
document.getElementById('fastClickBtn').addEventListener('click',function(){ 
  fastClicks++; addPoints(5); document.getElementById('fastClicks').innerText=fastClicks; localStorage.setItem('fastClicks',fastClicks);
  if(fastClicks>=5){ alert("Brawo! ZaliczyÅ‚eÅ› szybkiego klikacza!"); fastClicks=0; document.getElementById('fastClicks').innerText=fastClicks; localStorage.setItem('fastClicks',fastClicks);}
});
</script>

</body>
</html>
