<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlayWatch ‚Äì Mega Gry</title>

<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9599322707323836" crossorigin="anonymous"></script>

<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}
header, footer {
  background:#0a1525;
  padding:15px;
  text-align:center;
}
section {
  max-width:800px;
  margin:20px auto;
  background:rgba(0,0,0,0.6);
  padding:15px;
  border-radius:12px;
}
button {
  padding:10px 15px;
  border:none;
  border-radius:6px;
  background:#ff9800;
  font-weight:bold;
  cursor:pointer;
}
input {
  padding:8px;
  border-radius:5px;
  border:none;
}
#loginScreen {
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}
#gameScreen { display:none; }
</style>
</head>

<body>

<div id="loginScreen">
  <h1>üéÆ PlayWatch</h1>
  <input id="nickInput" placeholder="Tw√≥j nick">
  <button onclick="login()">Start</button>
</div>

<div id="gameScreen">
<header>
  <h2>Nick: <span id="nick"></span></h2>
  <h3>Punkty: <span id="points">0</span></h3>
  <h4>Rebirthy: <span id="rebirths">0</span></h4>
  <h4>Mno≈ºnik: √ó<span id="multiplier">1</span></h4>
</header>

<section>
  <h2>üñ± Klikacz</h2>
  <button onclick="addClick()">Kliknij</button>
</section>

<section>
  <h2>üîÑ Rebirth</h2>
  <p>Koszt: <span id="rebirthCost">1000</span> pkt</p>
  <button onclick="doRebirth()">Rebirth</button>
</section>

<section>
  <h2>üèÜ Ranking (publiczny)</h2>
  <ol id="ranking"></ol>
</section>

<footer>
Kontakt: <b>sikoraszymon45@gmail.com</b>
</footer>
</div>

<script>
// ====== DANE ======
let nick = localStorage.getItem("nick") || "";
let points = Number(localStorage.getItem("points")) || 0;
let rebirths = Number(localStorage.getItem("rebirths")) || 0;

// ====== LOGOWANIE ======
function login(){
  nick = document.getElementById("nickInput").value.trim();
  if(!nick) return alert("Podaj nick!");
  localStorage.setItem("nick", nick);
  startGame();
}

function startGame(){
  document.getElementById("loginScreen").style.display="none";
  document.getElementById("gameScreen").style.display="block";
  document.getElementById("nick").innerText = nick;
  updateUI();
  save();
  loadRanking();
}

// ====== PUNKTY ======
function multiplier(){
  return 1 + rebirths;
}

function addClick(){
  points += 1 * multiplier();
  updateUI();
  save();
  saveToRanking();
}

// ====== REBIRTH ======
function rebirthCost(){
  if(rebirths === 0) return 1000;
  return Math.pow(10, rebirths + 2);
}

function doRebirth(){
  let cost = rebirthCost();
  if(points < cost) return alert("Za ma≈Ço punkt√≥w!");
  points -= cost;
  rebirths++;
  updateUI();
  save();
  saveToRanking();
}

// ====== UI ======
function updateUI(){
  document.getElementById("points").innerText = points;
  document.getElementById("rebirths").innerText = rebirths;
  document.getElementById("multiplier").innerText = multiplier();
  document.getElementById("rebirthCost").innerText = rebirthCost().toLocaleString();
}

// ====== ZAPIS ======
function save(){
  localStorage.setItem("points", points);
  localStorage.setItem("rebirths", rebirths);
}

// ====== AUTO START ======
if(nick) startGame();

// ================= FIREBASE (PUBLIC RANKING) =================
// üî¥ TU MUSISZ WKLEIƒÜ SWOJƒÑ KONFIGURACJƒò Z FIREBASE üî¥

/*
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

const firebaseConfig = {
  apiKey: "XXXX",
  authDomain: "XXXX",
  databaseURL: "XXXX",
  projectId: "XXXX",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function saveToRanking(){
  db.ref("ranking/"+nick).set({
    nick:nick,
    points:points,
    rebirths:rebirths
  });
}

function loadRanking(){
  db.ref("ranking").on("value", snap=>{
    let data = snap.val();
    if(!data) return;
    let arr = Object.values(data).sort((a,b)=>b.points-a.points);
    let html="";
    arr.slice(0,100).forEach(p=>{
      html+=`<li>${p.nick} - ${p.points}</li>`;
    });
    document.getElementById("ranking").innerHTML=html;
  });
}
*/
</script>

</body>
</html>
