<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlayWatch ‚Äì Mega Gry i Zagadki</title>

<meta name="google-site-verification" content="QfLBnMd0__vsX3u2wqf8pPBeqENz4B0Pn5aK794mkqQ" />

<script data-ad-client="ca-pub-9599322707323836" async
src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(to right, #1e3c72, #2a5298);
  color: #fff;
  margin: 0;
}
header, footer {
  text-align: center;
  padding: 20px;
  background: #0d1b33;
}
section {
  margin: 20px auto;
  padding: 15px;
  max-width: 800px;
  background: rgba(0,0,0,0.6);
  border-radius: 10px;
}
button {
  padding: 10px 15px;
  margin: 5px;
  border: none;
  border-radius: 5px;
  background: #ff9800;
  font-weight: bold;
  cursor: pointer;
}
input {
  padding: 8px;
  border-radius: 5px;
  border: none;
}
#loginScreen {
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
#gameScreen { display: none; }
</style>
</head>

<body>

<div id="loginScreen">
  <h1>üéÆ PlayWatch</h1>
  <input id="playerNick" placeholder="Tw√≥j nick">
  <button onclick="startGame()">Zaczynam</button>
</div>

<div id="gameScreen">

<header>
  <h2>Nick: <span id="displayNick"></span></h2>
  <p>Punkty: <span id="totalPoints">0</span></p>
  <p>Rebirthy: <span id="rebirthCount">0</span></p>
  <p>Mno≈ºnik: √ó<span id="rebirthMultiplier">1</span></p>
</header>

<section>
  <button onclick="klik()">Kliknij (+1)</button>
</section>

<section>
  <h3>üîÑ Rebirth</h3>
  <p>Koszt: <span id="rebirthCost">1000</span> pkt</p>
  <button onclick="rebirth()">Rebirth</button>
</section>

<section>
  <h3>üèÜ Ranking TOP 100</h3>
  <ol id="ranking"></ol>
</section>

<footer>
Kontakt: <b>sikoraszymon45@gmail.com</b>
</footer>

</div>

<script>
/* ====== DANE ====== */
let nick = localStorage.getItem("nick");
let points = parseInt(localStorage.getItem("points")) || 0;
let rebirths = parseInt(localStorage.getItem("rebirths")) || 0;
let ranking = JSON.parse(localStorage.getItem("ranking")) || [];

/* ====== FUNKCJE ====== */
function getMultiplier() {
  return Math.pow(2, rebirths);
}

function getRebirthCost() {
  if (rebirths === 0) return 1000;
  return Math.pow(10, rebirths) * 1000;
}

function save() {
  localStorage.setItem("points", points);
  localStorage.setItem("rebirths", rebirths);
}

/* ====== LOGIN ====== */
function startGame() {
  const n = document.getElementById("playerNick").value.trim();
  if (!n) return alert("Podaj nick");
  nick = n;
  localStorage.setItem("nick", nick);
  initGame();
}

function initGame() {
  document.getElementById("loginScreen").style.display = "none";
  document.getElementById("gameScreen").style.display = "block";
  document.getElementById("displayNick").innerText = nick;
  updateUI();
}

/* ====== UI ====== */
function updateUI() {
  document.getElementById("totalPoints").innerText = points;
  document.getElementById("rebirthCount").innerText = rebirths;
  document.getElementById("rebirthMultiplier").innerText = getMultiplier();
  document.getElementById("rebirthCost").innerText = getRebirthCost();
  updateRanking();
}

/* ====== GRA ====== */
function klik() {
  points += 1 * getMultiplier();
  save();
  updateUI();
}

/* ====== REBIRTH ====== */
function rebirth() {
  const cost = getRebirthCost();
  if (points < cost) {
    alert("Za ma≈Ço punkt√≥w");
    return;
  }
  points = 0;
  rebirths++;
  save();
  updateUI();
  alert("Rebirth! Nowy mno≈ºnik √ó" + getMultiplier());
}

/* ====== RANKING ====== */
function updateRanking() {
  const i = ranking.findIndex(x => x.nick === nick);
  if (i >= 0) ranking[i].points = points;
  else ranking.push({nick, points});

  ranking.sort((a,b)=>b.points-a.points);
  ranking = ranking.slice(0,100);

  document.getElementById("ranking").innerHTML =
    ranking.map(r=>`<li>${r.nick} ‚Äì ${r.points}</li>`).join("");

  localStorage.setItem("ranking", JSON.stringify(ranking));
}

/* ====== AUTO START ====== */
if (nick) initGame();
</script>

</body>
</html>
