<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlayWatch â€“ Mega Gry i Zagadki</title>
<style>
body { font-family: Arial, sans-serif; background: linear-gradient(to right, #1e3c72, #2a5298); color: #fff; margin: 0; padding: 0;}
header, footer { text-align: center; padding: 20px; background: #0d1b33;}
section { margin: 20px auto; padding: 15px; max-width: 800px; background: rgba(0,0,0,0.6); border-radius: 10px;}
button { padding: 10px 15px; margin: 5px; cursor: pointer; border: none; border-radius: 5px; background: #ff9800; color: #000; font-weight: bold;}
input { padding: 8px; border-radius: 5px; border: none; width: 200px;}
#loginScreen { display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh;}
#gameScreen { display: none; }
#pointsPanel { text-align:center; margin:20px 0;}
</style>
</head>
<body>

<!-- Ekran logowania -->
<div id="loginScreen">
  <h1>ğŸ® Witaj w PlayWatch!</h1>
  <p>Podaj swÃ³j nick, aby rozpoczÄ…Ä‡:</p>
  <input type="text" id="playerNick" placeholder="TwÃ³j nick">
  <button id="startBtn">Zaczynam!</button>
</div>

<!-- Ekran gry -->
<div id="gameScreen">
<header>
  <h1>ğŸ® PlayWatch</h1>
  <p>Nick: <span id="displayNick"></span></p>
  <p>Punkty: <span id="totalPoints">0</span></p>
  <p>Rebirthy: <span id="rebirthCount">0</span></p>
</header>

<!-- Gry -->
<section>
<h2>ğŸ–±ï¸ Klikacz</h2>
<p>KlikniÄ™cia: <span id="clicks">0</span></p>
<button id="clickBtn">Kliknij mnie</button>
</section>

<section>
<h2>ğŸ² Losowa liczba</h2>
<p>Liczba: <span id="number">?</span></p>
<button id="randomBtn">Losuj 1â€“100</button>
</section>

<section>
<h2>ğŸŒ Geografia</h2>
<p>PaÅ„stwo: <span id="geoCountry">?</span></p>
<input type="text" id="geoAnswer" placeholder="Twoja odpowiedÅº">
<button id="geoBtn">SprawdÅº</button>
<p id="geoResult"></p>
</section>

<section>
<h2>ğŸ° Historia</h2>
<p>Wydarzenie: <span id="historyEvent">?</span></p>
<input type="text" id="historyAnswer" placeholder="Twoja odpowiedÅº">
<button id="historyBtn">SprawdÅº</button>
<p id="historyResult"></p>
</section>

<section>
<h2>ğŸ“– Polski</h2>
<p>Pytanie: <span id="polishQuestion">?</span></p>
<input type="text" id="polishAnswer" placeholder="Twoja odpowiedÅº">
<button id="polishBtn">SprawdÅº</button>
<p id="polishResult"></p>
</section>

<section>
<h2>ğŸ‡¬ğŸ‡§ Angielski</h2>
<p>SÅ‚Ã³wko: <span id="englishWord">?</span></p>
<input type="text" id="englishAnswer" placeholder="Twoja odpowiedÅº">
<button id="englishBtn">SprawdÅº</button>
<p id="englishResult"></p>
</section>

<!-- Rebirth i bonus zawsze na dole -->
<section>
<h2>ğŸ”„ Rebirth</h2>
<button id="rebirthBtn">Rebirth Ã—2</button>
</section>

<section>
<h2>ğŸ’° Bonus za reklamÄ™</h2>
<button id="bonusBtn">OglÄ…daÅ‚em reklamÄ™</button>
</section>

<footer>
<a href="regulamin.html">Regulamin</a> |
<a href="polityka-prywatnosci.html">Polityka prywatnoÅ›ci</a> |
<a href="o_nas.html">O nas</a> |
Kontakt: <strong>sikoraszymon45@gmail.com</strong>
</footer>

<!-- LOGIKA GRY -->
<script>
let totalPoints = parseInt(localStorage.getItem('totalPoints')) || 0;
let clicks = parseInt(localStorage.getItem('clicks')) || 0;
let rebirthCount = parseInt(localStorage.getItem('rebirthCount')) || 0;
let rebirthMultiplier = rebirthCount + 1;
let currentNick = localStorage.getItem('currentNick') || "";

// Dane gier
let countries = ["Polska","Niemcy","Francja","WÅ‚ochy","Hiszpania","Chiny","USA","Kanada","Brazylia","Rosja"]; // Dodaj wszystkie paÅ„stwa
let usedCountries = [];

let historyEvents = [
  {event:"Chrzest Polski", answer:"966"},
  {event:"Bitwa pod Grunwaldem", answer:"1410"},
  {event:"Konstytucja 3 Maja", answer:"1791"},
  {event:"Rozbiory Polski", answer:"1772"},
  {event:"Powstanie Warszawskie", answer:"1944"}
];
let usedHistory = [];

let polishQuestions = [
  {q:"W ktÃ³rym przypadku jest 'domu'?", a:"dopeÅ‚niacz"},
  {q:"Kto napisaÅ‚ 'Pan Tadeusz'?", a:"Mickiewicz"},
  {q:"W ktÃ³rym wieku urodziÅ‚ siÄ™ SÅ‚owacki?", a:"XIX"}
];
let usedPolish = [];

let englishWords = [
  {eng:"cat", pl:"kot"},
  {eng:"dog", pl:"pies"},
  {eng:"house", pl:"dom"}
];
let usedEnglish = [];

// START GRY
document.getElementById('startBtn').addEventListener('click', function(){
  let nick = document.getElementById('playerNick').value.trim();
  if(!nick){ alert("Podaj nick!"); return; }
  currentNick = nick;
  localStorage.setItem('currentNick', currentNick);
  document.getElementById('displayNick').innerText = currentNick;
  document.getElementById('loginScreen').style.display = 'none';
  document.getElementById('gameScreen').style.display = 'block';
  updateAllDisplays();
  nextGeo(); nextHistory(); nextPolish(); nextEnglish();
});

// FUNKCJE
function updateAllDisplays(){
  document.getElementById('totalPoints').innerText = totalPoints;
  document.getElementById('clicks').innerText = clicks;
  document.getElementById('rebirthCount').innerText = rebirthCount;
}

document.getElementById('clickBtn').addEventListener('click', function(){
  clicks++; addPoints(1);
  document.getElementById('clicks').innerText = clicks;
  localStorage.setItem('clicks', clicks);
});

document.getElementById('randomBtn').addEventListener('click', function(){
  let num = Math.floor(Math.random()*100)+1;
  addPoints(num);
  document.getElementById('number').innerText = num;
});

document.getElementById('geoBtn').addEventListener('click', function(){
  let ans = document.getElementById('geoAnswer').value.trim();
  let correct = document.getElementById('geoCountry').innerText;
  if(ans.toLowerCase() === correct.toLowerCase()){
    addPoints(20);
    document.getElementById('geoResult').innerText="âœ… Dobrze!";
  } else {
    document.getElementById('geoResult').innerText=`âŒ PrawidÅ‚owo: ${correct}`;
  }
  document.getElementById('geoAnswer').value="";
  nextGeo();
});

document.getElementById('historyBtn').addEventListener('click', function(){
  let ans = document.getElementById('historyAnswer').value.trim();
  let correct = historyEvents.find(e=>e.event===document.getElementById('historyEvent').innerText).answer;
  if(ans===correct){
    addPoints(20);
    document.getElementById('historyResult').innerText="âœ… Dobrze!";
  } else {
    document.getElementById('historyResult').innerText=`âŒ PrawidÅ‚owo: ${correct}`;
  }
  document.getElementById('historyAnswer').value="";
  nextHistory();
});

document.getElementById('polishBtn').addEventListener('click', function(){
  let ans = document.getElementById('polishAnswer').value.trim();
  let correct = polishQuestions.find(q=>q.q===document.getElementById('polishQuestion').innerText).a;
  if(ans.toLowerCase()===correct.toLowerCase()){
    addPoints(20);
    document.getElementById('polishResult').innerText="âœ… Dobrze!";
  } else {
    document.getElementById('polishResult').innerText=`âŒ PrawidÅ‚owo: ${correct}`;
  }
  document.getElementById('polishAnswer').value="";
  nextPolish();
});

document.getElementById('englishBtn').addEventListener('click', function(){
  let ans = document.getElementById('englishAnswer').value.trim();
  let correct = englishWords.find(w=>w.eng===document.getElementById('englishWord').innerText).pl;
  if(ans.toLowerCase()===correct.toLowerCase()){
    addPoints(20);
    document.getElementById('englishResult').innerText="âœ… Dobrze!";
  } else {
    document.getElementById('englishResult').innerText=`âŒ PrawidÅ‚owo: ${correct}`;
  }
  document.getElementById('englishAnswer').value="";
  nextEnglish();
});

document.getElementById('rebirthBtn').addEventListener('click', function(){
  let cost = 1000 * Math.pow(10, rebirthCount);
  if(totalPoints>=cost){
    totalPoints=0;
    rebirthCount++;
    rebirthMultiplier = rebirthCount+1;
    updateAllDisplays();
    localStorage.setItem('totalPoints', totalPoints);
    localStorage.setItem('rebirthCount', rebirthCount);
    alert(`Rebirth Ã—${rebirthMultiplier}! Wszystkie punkty mnoÅ¼one.`);
  } else alert(`Nie masz ${cost} pkt!`);
});

document.getElementById('bonusBtn').addEventListener('click', function(){
  addPoints(50);
  alert("Bonus +50 pkt!");
});

function addPoints(p){ totalPoints += p*rebirthMultiplier; updateAllDisplays(); localStorage.setItem('totalPoints', totalPoints); }

// Auto-logowanie
if(currentNick!==""){
  document.getElementById('loginScreen').style.display='none';
  document.getElementById('gameScreen').style.display='block';
  document.getElementById('displayNick').innerText=currentNick;
  updateAllDisplays();
  nextGeo(); nextHistory(); nextPolish(); nextEnglish();
}

// Funkcje kolejnych pytaÅ„ z resetem
function nextGeo(){
  if(countries.length===0){ countries=usedCountries; usedCountries=[]; }
  let idx = Math.floor(Math.random()*countries.length);
  document.getElementById('geoCountry').innerText=countries[idx];
  usedCountries.push(countries[idx]);
  countries.splice(idx,1);
}

function nextHistory(){
  if(historyEvents.length===0){ historyEvents=usedHistory; usedHistory=[]; }
  let idx = Math.floor(Math.random()*historyEvents.length);
  document.getElementById('historyEvent').innerText=historyEvents[idx].event;
  usedHistory.push(historyEvents[idx]);
  historyEvents.splice(idx,1);
}

function nextPolish(){
  if(polishQuestions.length===0){ polishQuestions=usedPolish; usedPolish=[]; }
  let idx = Math.floor(Math.random()*polishQuestions.length);
  document.getElementById('polishQuestion').innerText=polishQuestions[idx].q;
  usedPolish.push(polishQuestions[idx]);
  polishQuestions.splice(idx,1);
}

function nextEnglish(){
  if(englishWords.length===0){ englishWords=usedEnglish; usedEnglish=[]; }
  let idx = Math.floor(Math.random()*englishWords.length);
  document.getElementById('englishWord').innerText=englishWords[idx].eng;
  usedEnglish.push(englishWords[idx]);
  englishWords.splice(idx,1);
}
</script>
</body>
</html>
